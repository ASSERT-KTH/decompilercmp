---
title: "Venn Diagrams"
output: html_notebook
---

This notebook plot Venn Diagrams of the results obtained with the decompilers.

# Load required packages

```{r}
library(tidyverse)
library(venn)
theme_set(theme_bw())
```

# Read the dataset

```{r}
dataset <- read.csv("data/dataset.csv")
```

# Venn Diagrams

### Venn Diagram of recompilable classes

```{r}

a <- dataset %>% 
  filter(Decompiler == "CFR-0.141" & isRecompilable == "true") %>% 
  select(Class)

b <- dataset %>% 
  filter(Decompiler == "Procyon-0.5.34" & isRecompilable == "true") %>% 
  select(Class)

c <- dataset %>% 
  filter(Decompiler == "JD-GUI-1.4.1" & isRecompilable == "true") %>% 
  select(Class)

d <- dataset %>% 
  filter(Decompiler == "Jode-1.1.2-pre1" & isRecompilable == "true") %>% 
  select(Class)

e <- dataset %>% 
  filter(Decompiler == "Krakatau" & isRecompilable == "true") %>% 
  select(Class)

f <- dataset %>% 
  filter(Decompiler == "Fernflower-2.5.0.Final" & isRecompilable == "true") %>% 
  select(Class)

g <- dataset %>% 
  filter(Decompiler == "Dava-3.3.0" & isRecompilable == "true") %>% 
  select(Class)

decompilersToPlot <- list(a$Class, b$Class, c$Class, d$Class, e$Class, f$Class, g$Class)
snames <- c("CFR", "Procyon",  "JD", "Jode", "Krakatau", "Fernflower", "Dava")
venn(decompilersToPlot, snames = snames, ilab=TRUE, zcolor = "style")

```

### Venn Diagram of tests that pass

```{r}
a <- dataset %>% 
  filter(Decompiler == "CFR-0.141" & passTests == "true") %>% 
  select(Class)

b <- dataset %>% 
  filter(Decompiler == "Procyon-0.5.34" & passTests == "true") %>% 
  select(Class)

c <- dataset %>% 
  filter(Decompiler == "JD-GUI-1.4.1" & passTests == "true") %>% 
  select(Class)

d <- dataset %>% 
  filter(Decompiler == "Jode-1.1.2-pre1" & passTests == "true") %>% 
  select(Class)

e <- dataset %>% 
  filter(Decompiler == "Krakatau" & passTests == "true") %>% 
  select(Class)

f <- dataset %>% 
  filter(Decompiler == "Fernflower-2.5.0.Final" & passTests == "true") %>% 
  select(Class)

g <- dataset %>% 
  filter(Decompiler == "Dava-3.3.0" & passTests == "true") %>% 
  select(Class)

decompilersToPlot <- list(a$Class, b$Class, c$Class, d$Class, e$Class, f$Class, g$Class)
snames <- c("CFR", "Procyon",  "JD", "Jode", "Krakatau", "Fernflower", "Dava")
venn(decompilersToPlot, snames = snames, ilab=TRUE, zcolor = "style")
```

### Venn Digram of failures
```{r}
a <- dataset %>% 
  filter(Decompiler == "CFR-0.141" & passTests == "false") %>% 
  select(Class)

b <- dataset %>% 
  filter(Decompiler == "Procyon-0.5.34" & passTests == "false") %>% 
  select(Class)

c <- dataset %>% 
  filter(Decompiler == "JD-GUI-1.4.1" & passTests == "false") %>% 
  select(Class)

d <- dataset %>% 
  filter(Decompiler == "Jode-1.1.2-pre1" & passTests == "false") %>% 
  select(Class)

e <- dataset %>% 
  filter(Decompiler == "Krakatau" & passTests == "false") %>% 
  select(Class)

f <- dataset %>% 
  filter(Decompiler == "Fernflower-2.5.0.Final" & passTests == "false") %>% 
  select(Class)

g <- dataset %>% 
  filter(Decompiler == "Dava-3.3.0" & passTests == "false") %>% 
  select(Class)

decompilersToPlot <- list(a$Class, b$Class, c$Class, d$Class, e$Class, f$Class, g$Class)
snames <- c("CFR", "Procyon",  "JD", "Jode", "Krakatau", "Fernflower", "Dava")
failures <- venn(decompilersToPlot, snames = snames, ilab=TRUE, zcolor = "style")
```